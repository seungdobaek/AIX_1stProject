<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì „ë ¥ ìˆ˜ìš” ë¶„ì„ ë° ëª¨ë¸ ë¹„êµ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #4834d4 0%, #686de0 100%);
      --bg-color: #f0f2f5;
      --card-bg: #ffffff;
      --text-main: #1e272e;
      --text-sub: #485460;
      --shadow: 0 10px 30px rgba(0,0,0,0.10);
      --shadow-soft: 0 12px 40px rgba(0,0,0,0.08);

      --dnn-color: #4834d4;
      --xgb-color: #20bf6b;
      --lstm-color: #f7b731;

      --border: #edeff2;
      --muted: #a4b0be;
      --hint: #747d8c;
      --panel: #f8faff;

      --radius-lg: 22px;
      --radius-md: 16px;
      --radius-sm: 12px;
    }

    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-main);
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }

    /* ===== Header / Hero ===== */
    header {
      background: var(--primary-gradient);
      color: #fff;
      padding: 3.2rem 1rem 5.2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    header::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 20% 20%, rgba(255,255,255,.20) 0 18%, transparent 19%),
        radial-gradient(circle at 85% 35%, rgba(255,255,255,.14) 0 16%, transparent 17%),
        radial-gradient(circle at 55% 85%, rgba(255,255,255,.10) 0 18%, transparent 19%);
      transform: rotate(10deg);
      pointer-events:none;
    }

    header h1 {
      margin: 0;
      font-size: 2.25rem;
      font-weight: 900;
      letter-spacing: -1.5px;
      position: relative;
      z-index: 1;
    }
    header p {
      margin: 12px auto 0;
      max-width: 760px;
      opacity: 0.92;
      font-size: 1rem;
      position: relative;
      z-index: 1;
    }
    .hero-actions{
      margin-top: 22px;
      display:flex;
      gap: 10px;
      justify-content:center;
      flex-wrap:wrap;
      position: relative;
      z-index: 1;
    }
    .hero-btn{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      text-decoration:none;
      background: #fff;
      color: #4834d4;
      padding: 12px 22px;
      border-radius: 999px;
      font-weight: 900;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .hero-btn:hover{ transform: translateY(-2px); box-shadow: 0 14px 35px rgba(0,0,0,0.18); }
    .hero-ghost{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      text-decoration:none;
      background: rgba(255,255,255,.14);
      color: #fff;
      padding: 12px 22px;
      border-radius: 999px;
      font-weight: 900;
      border: 1px solid rgba(255,255,255,.22);
      transition: transform .2s ease, background .2s ease;
    }
    .hero-ghost:hover{ transform: translateY(-2px); background: rgba(255,255,255,.18); }

    /* ===== Container / Card ===== */
    .container {
      max-width: 1200px;
      margin: -1.2rem auto 4rem; /* ëœ ëŒì–´ì˜¬ë¦¼ */
      padding: 0 20px;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 2.5rem;
      box-shadow: var(--shadow-soft);
      margin-bottom: 2rem;
      border: 1px solid rgba(237,239,242,0.9);
    }

    .section-title {
      font-size: 1.4rem;
      font-weight: 900;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
      color: #2f3542;
    }
    .section-title::before {
      content: '';
      width: 6px;
      height: 24px;
      background: #4834d4;
      border-radius: 3px;
    }

    .subtext {
      font-size: 0.86rem;
      color: var(--hint);
      margin-top: -8px;
      margin-bottom: 18px;
    }

    /* ===== Tabs ===== */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 18px;
      border-bottom: 2px solid var(--border);
      padding-bottom: 10px;
      flex-wrap: wrap;
    }
    .tab-btn {
      padding: 10px 18px;
      border: none;
      background: none;
      font-size: 1rem;
      font-weight: 900;
      color: var(--muted);
      cursor: pointer;
      transition: 0.25s;
      border-radius: 12px;
    }
    .tab-btn:hover { background: rgba(72, 52, 212, 0.08); color: #6c5ce7; }
    .tab-btn.active {
      background: #4834d4;
      color: white;
      box-shadow: 0 8px 18px rgba(72,52,212,0.25);
    }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* ===== Simulator Layout ===== */
    .simulator-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2.5rem;
      align-items: stretch;
    }
    @media (max-width: 900px) {
      .simulator-grid { grid-template-columns: 1fr; }
      .card { padding: 1.7rem; }
    }

    .step-hint{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:.78rem;
      font-weight:900;
      color:#636e72;
      background:#f4f6fb;
      border: 1px solid #e6ebf5;
      padding: 6px 10px;
      border-radius: 999px;
      margin-bottom: 12px;
    }
    .step-dot{
      width:8px; height:8px; border-radius:50%;
      background:#4834d4;
      box-shadow: 0 0 0 4px rgba(72,52,212,0.12);
    }

    .params-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .input-group { margin-bottom: 1rem; }
    .input-group label {
      display: block;
      font-size: 0.82rem;
      font-weight: 900;
      margin-bottom: 6px;
      color: var(--text-sub);
    }
    .input-group input, .input-group select {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--border);
      border-radius: 12px;
      font-family: inherit;
      font-size: 0.95rem;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease;
      background: white;
    }
    .input-group input:focus, .input-group select:focus{
      border-color: rgba(72,52,212,0.55);
      box-shadow: 0 0 0 4px rgba(72,52,212,0.12);
    }

    .btn-main {
      background: var(--primary-gradient);
      color: white;
      border: none;
      padding: 18px;
      border-radius: 14px;
      font-size: 1.08rem;
      font-weight: 900;
      cursor: pointer;
      transition: 0.25s;
      width: 100%;
      box-shadow: 0 12px 25px rgba(72,52,212,0.18);
    }
    .btn-main:hover {
      transform: translateY(-3px);
      box-shadow: 0 16px 32px rgba(72, 52, 212, 0.28);
    }
    .btn-main:active{ transform: translateY(-1px); }

    /* ===== Result Panel ===== */
    .result-panel { display: flex; flex-direction: column; gap: 12px; }
    .result-meta{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content: space-between;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: .78rem;
      font-weight: 900;
      border: 1px solid rgba(72,52,212,0.18);
      background: rgba(72,52,212,0.06);
      color: #4834d4;
    }
    .badge .mini{
      width:7px; height:7px; border-radius: 50%;
      background: #4834d4;
    }

    .result-display {
      background: var(--panel);
      border-radius: var(--radius-md);
      padding: 2rem;
      border: 2px dashed rgba(72, 52, 212, 0.55);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      flex-grow: 1;
      min-height: 360px;
      animation: fadeUp .55s ease;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(14px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .result-val {
      font-size: 3.35rem;
      font-weight: 900;
      color: #4834d4;
      margin: 10px 0;
      letter-spacing: -1px;
    }

    .result-subrow{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content:center;
      margin-top: 10px;
    }
    .pill{
      background: white;
      border: 1px solid #e0e6ed;
      border-radius: 999px;
      padding: 8px 12px;
      font-size: .82rem;
      font-weight: 900;
      color: #57606f;
    }
    .pill.good{ color: #20bf6b; border-color: rgba(32,191,107,0.35); background: rgba(32,191,107,0.06); }
    .pill.neutral{ color: #4834d4; border-color: rgba(72,52,212,0.35); background: rgba(72,52,212,0.06); }

    /* Placeholder / Loading */
    #result-placeholder{
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--muted);
      border: 2px dashed #dcdde1;
      border-radius: var(--radius-md);
      padding: 24px;
      min-height: 360px;
      background: rgba(255,255,255,0.35);
    }

    .loading { display: none; text-align: center; padding: 42px; min-height: 360px; border-radius: var(--radius-md); background: rgba(255,255,255,0.35); border: 1px solid rgba(237,239,242,0.9); }
    .spinner {
      width: 40px; height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #4834d4;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    /* ===== Algo Cards ===== */
    .algo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem; }
    .algo-card {
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      overflow: hidden;
      background: white;
      box-shadow: 0 10px 24px rgba(0,0,0,0.06);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .algo-card:hover{ transform: translateY(-4px); box-shadow: 0 14px 34px rgba(0,0,0,0.10); }
    .algo-header {
      padding: 1.2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fafbfc;
      border-bottom: 1px solid #eee;
      gap: 10px;
    }
    .algo-name{ font-weight: 900; }
    .algo-badges{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
    .best-badge{
      background: #4834d4;
      color: #fff;
      font-size: .72rem;
      font-weight: 900;
      padding: 6px 10px;
      border-radius: 999px;
      box-shadow: 0 10px 20px rgba(72,52,212,0.22);
    }
    .tag-badge{
      background: rgba(0,0,0,0.05);
      color: #2f3542;
      font-size: .72rem;
      font-weight: 900;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.06);
    }

    .algo-img-container {
      width: 100%;
      height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      background: #fff;
    }
    .algo-img-container img { width: 90%; height: 90%; object-fit: contain; }

    .algo-stats {
      padding: 1rem;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      background: var(--panel);
      border-top: 1px solid rgba(237,239,242,0.9);
      border-bottom: 1px solid rgba(237,239,242,0.9);
    }
    .stat-box {
      background: white;
      padding: 10px;
      border-radius: 12px;
      text-align: center;
      border: 1px solid #e0e6ed;
    }
    .stat-label{ font-size:0.7rem; color:#7f8c8d; font-weight:900; }
    .stat-val { font-weight: 900; font-size: 1.15rem; margin-top:4px; }
    .algo-desc { padding: 1rem; font-size: 0.88rem; color: var(--text-sub); }
    .algo-points{
      padding: 0 1rem 1.2rem;
      margin: 0;
      color: #57606f;
      font-size: .85rem;
      line-height: 1.75;
    }
    .algo-points li{ margin: 4px 0; }

    /* ===== Summary section ===== */
    .summary-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items: start;
    }
    @media (max-width: 900px) { .summary-grid{ grid-template-columns: 1fr; } }

    .summary-box{
      background: #fff;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px;
      box-shadow: 0 10px 22px rgba(0,0,0,0.06);
    }
    .summary-box h3{
      margin: 0 0 8px;
      font-size: 1.05rem;
      font-weight: 900;
      color: #2f3542;
    }
    .summary-list{
      margin: 0;
      padding-left: 18px;
      color: #57606f;
      font-size: .92rem;
      line-height: 1.85;
    }
    .kpi-row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (max-width: 420px) { .kpi-row{ grid-template-columns: 1fr; } }
    .kpi{
      background: var(--panel);
      border: 1px solid rgba(72,52,212,0.12);
      border-radius: 14px;
      padding: 14px;
    }
    .kpi .k{ font-size:.72rem; font-weight: 900; color:#7f8c8d; }
    .kpi .v{ font-size:1.15rem; font-weight: 900; margin-top:4px; color:#2f3542; }

    /* ===== Footer ===== */
    footer {
      background: #2f3542;
      color: #a4b0be;
      text-align: center;
      padding: 2rem;
      margin-top: 4rem;
    }
    footer a{ color:#dfe4ea; text-decoration:none; font-weight:800; }
    footer a:hover{ text-decoration: underline; }
  </style>
</head>

<body>
  <header>
    <h1>ì „ë ¥ ìˆ˜ìš” ì˜ˆì¸¡ ëª¨ë¸ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</h1>
    <p>ê¸°ìƒÂ·í™˜ê²½ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ AI ì „ë ¥ ìˆ˜ìš”ë¥¼ ì˜ˆì¸¡í•˜ê³ , DNN / XGBoost ëª¨ë¸ ì„±ëŠ¥ì„ ë¹„êµí•©ë‹ˆë‹¤.</p>

    <div class="hero-actions">
      <a class="hero-btn" href="#simulator" aria-label="ì‹œë®¬ë ˆì´í„°ë¡œ ì´ë™">ì˜ˆì¸¡ ë°”ë¡œ í•´ë³´ê¸° â†“</a>
      <a class="hero-ghost" href="#models" aria-label="ëª¨ë¸ ë¹„êµë¡œ ì´ë™">ëª¨ë¸ ì„±ëŠ¥ ë³´ê¸°</a>
      <a class="hero-ghost" href="/preprocessing" aria-label="ì „ì²˜ë¦¬ ê³¼ì • ë³´ê¸°">ì „ì²˜ë¦¬ ê³¼ì •</a>
      <a class="hero-ghost" href="/eda" aria-label="EDA ë³´ê¸°">EDA ë¶„ì„</a>
    </div>
  </header>

  <div class="container">
    <!-- ì˜ˆì¸¡ ì‹œë®¬ë ˆì´í„° ì¹´ë“œ -->
    <div class="card" id="simulator">
      <div class="section-title">AI ìˆ˜ìš” ì˜ˆì¸¡ ì‹œë®¬ë ˆì´í„°</div>
      <div class="subtext">ì…ë ¥ ë°©ì‹(íƒ­)ì„ ì„ íƒí•˜ê³  ë¶„ì„ì„ ì‹¤í–‰í•˜ë©´, ì˜ˆì¸¡ê°’ê³¼ ê°„ë‹¨í•œ í•´ì„ ì§€í‘œë¥¼ í•¨ê»˜ ì œê³µí•©ë‹ˆë‹¤.</div>

      <!-- âœ… íƒ­ ìˆœì„œ ë³€ê²½ + envTabì„ ê¸°ë³¸ activeë¡œ -->
      <div class="tabs" role="tablist" aria-label="ì˜ˆì¸¡ ì…ë ¥ ë°©ì‹ íƒ­">
        <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="envTab" onclick="openTab(event, 'envTab')">í™˜ê²½ ë³€ìˆ˜(ì‹œë®¬ë ˆì´ì…˜)</button>
        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="dateTab" onclick="openTab(event, 'dateTab')">ë‚ ì§œ ê¸°ì¤€ ì˜ˆì¸¡</button>
      </div>

      <div class="simulator-grid">
        <div class="input-panel">
          <div class="step-hint"><span class="step-dot"></span> STEP 1 Â· ëŒ€ìƒ ì§€ì—­ ì„ íƒ</div>

          <div class="input-group">
            <label for="guSelect">êµ¬ ì„ íƒ</label>
            <select id="guSelect">
              <option value="">-- êµ¬ë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
            </select>
          </div>

          <div class="input-group">
            <label for="dongSelect">ë™ ì„ íƒ</label>
            <select id="dongSelect" disabled>
              <option value="">-- ë¨¼ì € êµ¬ë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
            </select>
          </div>

          <div class="step-hint" style="margin-top:6px;"><span class="step-dot"></span> STEP 2 Â· ì…ë ¥ ë°©ì‹</div>

          <!-- âœ… íƒ­ 1: í™˜ê²½ ë³€ìˆ˜ (ê¸°ë³¸ active) -->
          <div id="envTab" class="tab-content active" role="tabpanel">
            <div class="params-grid">
              <div class="input-group">
                <label for="minTemp">ìµœì €ê¸°ì˜¨ (Â°C)</label>
                <input type="number" step="0.1" value="22.5" id="minTemp">
              </div>
              <div class="input-group">
                <label for="groundTemp">ì§€ì¤‘ì˜¨ë„ (3m, Â°C)</label>
                <input type="number" step="0.1" value="18.2" id="groundTemp">
              </div>
              <div class="input-group">
                <label for="humidity">ìƒëŒ€ìŠµë„ (%)</label>
                <input type="number" value="65" id="humidity">
              </div>
              <div class="input-group">
                <label for="pressure">í˜„ì§€ê¸°ì•• (hPa)</label>
                <input type="number" step="0.1" value="1013.2" id="pressure">
              </div>
              <div class="input-group">
                <label for="sunshine">ê°€ì¡°ì‹œê°„ (hr)</label>
                <input type="number" step="0.1" value="14.5" id="sunshine">
              </div>
              <div class="input-group">
                <label for="isHoliday">íŠ¹ì´ì‚¬í•­</label>
                <select id="isHoliday">
                  <option value="0">í‰ì¼</option>
                  <option value="1">íœ´ì¼/ê³µíœ´ì¼</option>
                </select>
              </div>
              <div class="input-group">
                <label for="lag_1d">1ì¼ì „ ì „ë ¥ì‚¬ìš©ëŸ‰(KWH)</label>
                <input type="number" step="100" value="5000" id="lag_1d">
              </div>
              <div class="input-group">
                <label for="1ag_7d">7ì¼ì „ ì „ë ¥ì‚¬ìš©ëŸ‰(KWH)</label>
                <input type="number" step="100" value="5000" id="lag_7d">
              </div>
            </div>
            <p class="subtext" style="margin:0 0 14px;">
              * í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§ì ‘ ì…ë ¥í•´ â€œê°€ì • ì‹œë®¬ë ˆì´ì…˜â€ìœ¼ë¡œ ì˜ˆì¸¡ì„ ë¹„êµí•  ìˆ˜ ìˆì–´ìš”.
            </p>
          </div>

          <!-- âœ… íƒ­ 2: ë‚ ì§œ ê¸°ì¤€ -->
          <div id="dateTab" class="tab-content" role="tabpanel">
            <div class="input-group">
              <label for="targetDate">ì˜ˆì¸¡ ëŒ€ìƒ ë‚ ì§œ</label>
              <input type="date" id="targetDate">
            </div>
            <p class="subtext" style="margin:0 0 14px;">
              * ì„ íƒí•œ ë‚ ì§œì˜ ê³µê³µ ê¸°ìƒ ë°ì´í„° API ìˆ˜ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™ ì˜ˆì¸¡(ë°ëª¨)í•©ë‹ˆë‹¤.
            </p>
          </div>

          <button class="btn-main" onclick="runAI()">ë¶„ì„ ë° ì˜ˆì¸¡ ì‹¤í–‰</button>
        </div>

        <div class="result-panel">
          <div class="result-meta">
            <span class="badge"><span class="mini"></span><span id="resultMode">READY</span></span>
            <span class="badge" style="background: rgba(32,191,107,0.06); border-color: rgba(32,191,107,0.18); color:#20bf6b;">
              <span class="mini" style="background:#20bf6b;"></span> <span id="resultStatus">ëŒ€ê¸°ì¤‘</span>
            </span>
          </div>

          <div id="loading" class="loading">
            <div class="spinner"></div>
            <p style="font-weight:900; color:#4834d4; margin:0;">ë°ì´í„° ì²˜ë¦¬ ë° ê°€ì¤‘ì¹˜ ê³„ì‚° ì¤‘...</p>
            <p style="font-size:.85rem; color:#747d8c; margin:10px 0 0;">(ë°ëª¨) ì…ë ¥ê°’ ê¸°ë°˜ìœ¼ë¡œ ì˜ˆì¸¡ê°’ì„ ì‚°ì¶œí•©ë‹ˆë‹¤.</p>
          </div>

          <div id="result-placeholder">
            <div>
              <div style="font-weight:900; font-size:1.05rem; color:#57606f;">ì˜ˆì¸¡ ê²°ê³¼ íŒ¨ë„</div>
              <p style="margin:8px 0 0;">
                íƒ­ì—ì„œ ì…ë ¥ ë°©ì‹ì„ ê³ ë¥´ê³  <b>ë¶„ì„ ë° ì˜ˆì¸¡ ì‹¤í–‰</b>ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.
              </p>
              <p style="margin:10px 0 0; font-size:.85rem; color:#95a5a6;">
                Tip: â€œí™˜ê²½ ë³€ìˆ˜â€ íƒ­ì—ì„œ íœ´ì¼/í‰ì¼ì„ ë°”ê¾¸ë©´ ê²°ê³¼ ì°¨ì´ê°€ í™• ë³´ì—¬ìš”.
              </p>
            </div>
          </div>

          <div id="result-content" class="result-display" style="display:none;">
            <div id="activeTabTag" class="badge" style="background:#4834d4; color:#fff; border-color: rgba(255,255,255,0.0);">
              <span class="mini" style="background:#fff;"></span> DATE-BASED AI
            </div>

            <div style="font-weight: 900; color: #747d8c;">ìµœì¢… ì˜ˆì¸¡ ì „ë ¥ ìˆ˜ìš”</div>

            <div class="result-val">
              <span id="resultVal">0</span>
              <span style="font-size:1.45rem; color:#747d8c; margin-left:5px;">kW</span>
            </div>

            <p id="resultDesc" style="font-size: 0.88rem; color: #20bf6b; font-weight: 900; margin-top: 14px;">ë¶„ì„ ì™„ë£Œ</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ëª¨ë¸ ë¹„êµ ì„¹ì…˜ -->
    <div class="card" id="models">
      <div class="section-title">ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ ë° ê²€ì¦ ë°ì´í„°</div>
      <div class="subtext">ì´ 9ê°œì˜ ëª¨ë¸ì„ í•™ìŠµí•˜ê³  MSE, MAE, RMSEë¥¼ ë¹„êµí•˜ì—¬ ìµœì ì˜ ëª¨ë¸ì„ ì„ ì •í–ˆìŠµë‹ˆë‹¤.</div>

      <!-- ëª¨ë¸ ë¹„êµ ì°¨íŠ¸ -->
      <div style="margin: 2rem 0; text-align: center;">
        <img src="/static/model_comparison.png" alt="ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ ì°¨íŠ¸" style="max-width: 100%; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.12);">
      </div>

      <!-- ë² ìŠ¤íŠ¸ ëª¨ë¸ -->
      <div style="background: linear-gradient(135deg, #f8faff 0%, #e8eeff 100%); padding: 2rem; border-radius: 16px; margin: 2rem 0; border: 2px solid #4834d4;">
        <h3 style="margin: 0 0 1rem 0; color: #4834d4; font-size: 1.3rem; font-weight: 900;">ğŸ† Best Model: LightGBM</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
          <div style="background: white; padding: 1rem; border-radius: 12px; text-align: center;">
            <div style="font-size: 0.75rem; color: #7f8c8d; font-weight: 700; margin-bottom: 0.5rem;">MSE</div>
            <div style="font-size: 1.4rem; font-weight: 900; color: #4834d4;">7.97B</div>
          </div>
          <div style="background: white; padding: 1rem; border-radius: 12px; text-align: center;">
            <div style="font-size: 0.75rem; color: #7f8c8d; font-weight: 700; margin-bottom: 0.5rem;">MAE</div>
            <div style="font-size: 1.4rem; font-weight: 900; color: #20bf6b;">12,271</div>
          </div>
          <div style="background: white; padding: 1rem; border-radius: 12px; text-align: center;">
            <div style="font-size: 0.75rem; color: #7f8c8d; font-weight: 700; margin-bottom: 0.5rem;">RMSE</div>
            <div style="font-size: 1.4rem; font-weight: 900; color: #f7b731;">89,264</div>
          </div>
        </div>
        <p style="margin: 1.5rem 0 0 0; color: #57606f; font-size: 0.95rem; line-height: 1.7;">
          LightGBMì€ ëª¨ë“  ì˜¤ì°¨ ì§€í‘œì—ì„œ ê°€ì¥ ìš°ìˆ˜í•œ ì„±ëŠ¥ì„ ë³´ì˜€ìœ¼ë©°, íŠ¹íˆ MAE(í‰ê·  ì ˆëŒ€ ì˜¤ì°¨)ê°€ ê°€ì¥ ë‚®ì•„ ì‹¤ì œ ì˜ˆì¸¡ê°’ì˜ ì •í™•ë„ê°€ ë›°ì–´ë‚©ë‹ˆë‹¤.
        </p>
      </div>

      <!-- ëª¨ë¸ë³„ ìƒì„¸ ë¹„êµ -->
      <div class="algo-grid">
      
        <!-- EmbeddingDNN (LAG_íœ´ì¼ í¬í•¨) -->
        <div class="algo-card">
          <div class="algo-header">
            <span class="algo-name">EmbeddingDNN (LAG_íœ´ì¼)</span>
            <div class="algo-badges">
              <span class="tag-badge">3ìœ„</span>
            </div>
          </div>
          <div class="algo-stats" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="stat-box">
              <div class="stat-label">MSE</div>
              <div class="stat-val" style="color:#9b59b6; font-size: 0.95rem;">9.31B</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">MAE</div>
              <div class="stat-val" style="color:#9b59b6; font-size: 0.95rem;">14,028</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">RMSE</div>
              <div class="stat-val" style="color:#9b59b6; font-size: 0.95rem;">96,494</div>
            </div>
          </div>
          <div class="algo-desc">ë²”ì£¼í˜• ë³€ìˆ˜(ì§€ì—­ëª…)ë¥¼ Embedding Layerë¡œ í•™ìŠµí•˜ì—¬ ì§€ì—­ íŠ¹ì„±ì„ ë°˜ì˜í•œ ëª¨ë¸ì…ë‹ˆë‹¤.</div>
          <ul class="algo-points">
            <li>ë²”ì£¼í˜• ë³€ìˆ˜ë¥¼ ë²¡í„°ë¡œ í•™ìŠµ</li>
            <li>ì§€ì—­ ê°„ ìœ ì‚¬ë„ íŒŒì•… ê°€ëŠ¥</li>
            <li>íœ´ì¼ ì •ë³´ë¡œ íŒ¨í„´ ë³€í™” ë°˜ì˜</li>
          </ul>
        </div>

        <!-- XGBoost -->
        <div class="algo-card">
          <div class="algo-header">
            <span class="algo-name">XGBoost</span>
            <div class="algo-badges">
              <span class="tag-badge">4ìœ„</span>
            </div>
          </div>
          <div class="algo-stats" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="stat-box">
              <div class="stat-label">MSE</div>
              <div class="stat-val" style="color:#20bf6b; font-size: 0.95rem;">17.7B</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">MAE</div>
              <div class="stat-val" style="color:#20bf6b; font-size: 0.95rem;">13,616</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">RMSE</div>
              <div class="stat-val" style="color:#20bf6b; font-size: 0.95rem;">132,887</div>
            </div>
          </div>
          <div class="algo-desc">LightGBM ë‹¤ìŒìœ¼ë¡œ ìš°ìˆ˜í•œ ì„±ëŠ¥ì„ ë³´ì˜€ìœ¼ë©°, Feature Importance ë¶„ì„ì— ê°•ì ì´ ìˆìŠµë‹ˆë‹¤.</div>
          <ul class="algo-points">
            <li>ë³€ìˆ˜ ì¤‘ìš”ë„ ì‹œê°í™”ë¡œ í•´ì„ ìš©ì´</li>
            <li>ê³¼ì í•© ë°©ì§€ ê¸°ëŠ¥ ìš°ìˆ˜</li>
            <li>ì•ˆì •ì ì¸ ì˜ˆì¸¡ ì„±ëŠ¥</li>
          </ul>
        </div>
        
        <!-- LightGBM -->
        <div class="algo-card" style="border: 2px solid #4834d4;">
          <div class="algo-header">
            <span class="algo-name">LightGBM</span>
            <div class="algo-badges">
              <span class="best-badge">BEST</span>
              <span class="tag-badge">ìµœê³  ì •í™•ë„</span>
            </div>
          </div>
          <div class="algo-stats" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="stat-box">
              <div class="stat-label">MSE</div>
              <div class="stat-val" style="color:#4834d4; font-size: 0.95rem;">7.97B</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">MAE</div>
              <div class="stat-val" style="color:#20bf6b; font-size: 0.95rem;">12,271</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">RMSE</div>
              <div class="stat-val" style="color:#f7b731; font-size: 0.95rem;">89,264</div>
            </div>
          </div>
          <div class="algo-desc">Gradient Boosting ê¸°ë°˜ìœ¼ë¡œ ëª¨ë“  ì§€í‘œì—ì„œ ìµœê³  ì„±ëŠ¥ì„ ë‹¬ì„±í•œ ë² ìŠ¤íŠ¸ ëª¨ë¸ì…ë‹ˆë‹¤.</div>
          <ul class="algo-points">
            <li>ëª¨ë“  ì˜¤ì°¨ ì§€í‘œì—ì„œ 1ìœ„ ê¸°ë¡</li>
            <li>ë³€ìˆ˜ ì¤‘ìš”ë„ ë¶„ì„ ê°€ëŠ¥</li>
            <li>ë¹ ë¥¸ í•™ìŠµ ì†ë„ì™€ ë†’ì€ ì •í™•ë„</li>
          </ul>
        </div>

        <!-- SimpleDNN (LAG í¬í•¨) -->
        <div class="algo-card">
          <div class="algo-header">
            <span class="algo-name">SimpleDNN (LAG í¬í•¨)</span>
            <div class="algo-badges">
              <span class="tag-badge">2ìœ„</span>
            </div>
          </div>
          <div class="algo-stats" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="stat-box">
              <div class="stat-label">MSE</div>
              <div class="stat-val" style="color:#4834d4; font-size: 0.95rem;">8.25B</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">MAE</div>
              <div class="stat-val" style="color:#4834d4; font-size: 0.95rem;">18,137</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">RMSE</div>
              <div class="stat-val" style="color:#4834d4; font-size: 0.95rem;">90,848</div>
            </div>
          </div>
          <div class="algo-desc">LAG í”¼ì²˜(ê³¼ê±° ì „ë ¥ ì‚¬ìš©ëŸ‰)ë¥¼ ì¶”ê°€í•˜ë©´ì„œ ì„±ëŠ¥ì´ í¬ê²Œ í–¥ìƒëœ ëª¨ë¸ì…ë‹ˆë‹¤.</div>
          <ul class="algo-points">
            <li>LAG í”¼ì²˜ ì¶”ê°€ë¡œ MSE 68% ê°ì†Œ</li>
            <li>ì‹œê³„ì—´ íŒ¨í„´ í•™ìŠµ ëŠ¥ë ¥ ìš°ìˆ˜</li>
            <li>êµ¬ì¡°ê°€ ë‹¨ìˆœí•˜ì—¬ í•™ìŠµ ì†ë„ ë¹ ë¦„</li>
          </ul>
        </div>

      </div>

        

        

      <!-- ì„±ëŠ¥ ê°œì„  ê³¼ì • ìš”ì•½ -->
      <div style="background: #f8faff; padding: 2rem; border-radius: 16px; margin-top: 2rem; border-left: 4px solid #4834d4;">
        <h3 style="margin: 0 0 1.2rem 0; color: #4834d4; font-size: 1.2rem; font-weight: 900;">ğŸ“Š ëª¨ë¸ ì„±ëŠ¥ ê°œì„  ê³¼ì •</h3>
        <div style="display: grid; gap: 1rem;">
          <div style="background: white; padding: 1.2rem; border-radius: 12px;">
            <strong style="color: #2f3542; font-size: 1rem;">Step 1: ê¸°ë³¸ ëª¨ë¸ (ë‚ ì§œ ë¯¸í¬í•¨)</strong>
            <p style="margin: 0.5rem 0 0 0; color: #57606f; font-size: 0.9rem;">SimpleDNN ê¸°ë³¸ ëª¨ë¸ë¡œ ì‹œì‘, MSE: 26.3B</p>
          </div>
          <div style="background: white; padding: 1.2rem; border-radius: 12px;">
            <strong style="color: #2f3542; font-size: 1rem;">Step 2: LAG í”¼ì²˜ ì¶”ê°€</strong>
            <p style="margin: 0.5rem 0 0 0; color: #57606f; font-size: 0.9rem;">ê³¼ê±° ì „ë ¥ ì‚¬ìš©ëŸ‰ ì •ë³´ ì¶”ê°€, MSE: 8.25B (68% ê°œì„  âœ¨)</p>
          </div>
          <div style="background: white; padding: 1.2rem; border-radius: 12px;">
            <strong style="color: #2f3542; font-size: 1rem;">Step 3: íœ´ì¼ ì •ë³´ ì¶”ê°€</strong>
            <p style="margin: 0.5rem 0 0 0; color: #57606f; font-size: 0.9rem;">ê³µíœ´ì¼ Binary í”¼ì²˜ ì¶”ê°€, MSE: 9.31B</p>
          </div>
          <div style="background: white; padding: 1.2rem; border-radius: 12px;">
            <strong style="color: #2f3542; font-size: 1rem;">Step 4: LightGBM ì ìš©</strong>
            <p style="margin: 0.5rem 0 0 0; color: #57606f; font-size: 0.9rem;">Gradient Boosting ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©, MSE: 7.97B (ìµœê³  ì„±ëŠ¥ ğŸ†)</p>
          </div>
        </div>
      </div>
    </div>

    <!-- í”„ë¡œì íŠ¸ ìš”ì•½ ì„¹ì…˜ -->
    <div class="card" id="summary">
      <div class="section-title">í”„ë¡œì íŠ¸ ìš”ì•½</div>
      <div class="subtext">í¬íŠ¸í´ë¦¬ì˜¤/ë©´ì ‘ìš©ìœ¼ë¡œ í”„ë¡œì íŠ¸ í•µì‹¬ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.</div>

      <div class="summary-grid">
        <div class="summary-box">
          <h3>í•œ ì¤„ ì†Œê°œ</h3>
          <p style="margin:0; color:#57606f; font-size:.95rem; line-height:1.85;">
            ì„œìš¸ì‹œ ìì¹˜êµ¬ ë‹¨ìœ„ ì „ë ¥ ìˆ˜ìš”ë¥¼ ê¸°ìƒÂ·í™˜ê²½ ë³€ìˆ˜ë¡œ ì˜ˆì¸¡í•˜ê³ , ì´ 9ê°œì˜ ëª¨ë¸ì„ ë¹„êµí•˜ì—¬ LightGBMì„ ìµœì  ëª¨ë¸ë¡œ ì„ ì •í•œ ì „ë ¥ ìˆ˜ìš” ì˜ˆì¸¡ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
          </p>

          <div class="kpi-row">
            <div class="kpi">
              <div class="k">ë² ìŠ¤íŠ¸ ëª¨ë¸</div>
              <div class="v">LightGBM (MAE 12,271)</div>
            </div>
            <div class="kpi">
              <div class="k">ì„±ëŠ¥ ê°œì„ </div>
              <div class="v">MSE 70% ê°ì†Œ</div>
            </div>
          </div>
        </div>

        <div class="summary-box">
          <h3>ë°ì´í„° ê·œëª¨</h3>
          <ul class="summary-list">
            <li>ì„œìš¸ì‹œ 25ê°œ êµ¬, 466ê°œ ë²•ì •ë™</li>
            <li>3ë…„ê°„ ì¼ë³„ ë°ì´í„° (750K+ í–‰)</li>
            <li>ê¸°ìƒ ë³€ìˆ˜ 10ê°œ + LAG í”¼ì²˜ 3ê°œ</li>
            <li>í•™ìŠµ/ê²€ì¦/í…ŒìŠ¤íŠ¸: 70/15/15</li>
          </ul>
        </div>

        <div class="summary-box">
          <h3>ëª¨ë¸ ë¹„êµ ê²°ê³¼</h3>
          <ul class="summary-list">
            <li>ì´ 9ê°œ ëª¨ë¸ í•™ìŠµ ë° ë¹„êµ</li>
            <li>1ìœ„: LightGBM (RMSE 89,264)</li>
            <li>2ìœ„: LAG í¬í•¨ DNN (MAE 90,848)</li>
            <li>LAG í”¼ì²˜ë¡œ ì„±ëŠ¥ 47% í–¥ìƒ</li>
          </ul>
        </div>

        <div class="summary-box">
          <h3>ê¸°ìˆ  ìŠ¤íƒ</h3>
          <ul class="summary-list">
            <li>Backend: Flask, Python</li>
            <li>ëª¨ë¸: TensorFlow, LightGBM, XGBoost</li>
            <li>Frontend: HTML/CSS/JavaScript</li>
            <li>ë°ì´í„°: Pandas, NumPy, Scikit-learn</li>
          </ul>
        </div>
      </div>

      <!-- í•µì‹¬ ì„±ê³¼ -->
      <div style="background: linear-gradient(135deg, #f8faff 0%, #e8eeff 100%); padding: 2rem; border-radius: 16px; margin-top: 2rem; border: 2px solid #4834d4;">
        <h3 style="margin: 0 0 1.5rem 0; color: #4834d4; font-size: 1.25rem; font-weight: 900;">ğŸ¯ í•µì‹¬ ì„±ê³¼</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
          <div style="background: white; padding: 1.5rem; border-radius: 12px; border-left: 4px solid #4834d4;">
            <h4 style="margin: 0 0 0.8rem 0; color: #4834d4; font-size: 1.05rem;">ë°ì´í„° ì „ì²˜ë¦¬</h4>
            <p style="margin: 0; color: #57606f; font-size: 0.9rem; line-height: 1.7;">
              ë²•ì •ë™ ì½”ë“œ ì •ì œ, ê²°ì¸¡ì¹˜ ì²˜ë¦¬, ê¸°ìƒ ë°ì´í„° ë³‘í•©ì„ í†µí•´ ê³ í’ˆì§ˆ í•™ìŠµ ë°ì´í„°ì…‹ êµ¬ì¶•
            </p>
          </div>
          <div style="background: white; padding: 1.5rem; border-radius: 12px; border-left: 4px solid #20bf6b;">
            <h4 style="margin: 0 0 0.8rem 0; color: #20bf6b; font-size: 1.05rem;">í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§</h4>
            <p style="margin: 0; color: #57606f; font-size: 0.9rem; line-height: 1.7;">
              LAG í”¼ì²˜(1ì¼, 7ì¼, 30ì¼ ì „) ì¶”ê°€ë¡œ ì‹œê³„ì—´ íŒ¨í„´ í•™ìŠµ, ì„±ëŠ¥ 68% í–¥ìƒ ë‹¬ì„±
            </p>
          </div>
          <div style="background: white; padding: 1.5rem; border-radius: 12px; border-left: 4px solid #f7b731;">
            <h4 style="margin: 0 0 0.8rem 0; color: #f7b731; font-size: 1.05rem;">ëª¨ë¸ ìµœì í™”</h4>
            <p style="margin: 0; color: #57606f; font-size: 0.9rem; line-height: 1.7;">
              9ê°œ ëª¨ë¸ ë¹„êµ ë¶„ì„ì„ í†µí•´ LightGBM ì„ ì •, MAE 12,271ë¡œ ìµœê³  ì •í™•ë„ ë‹¬ì„±
            </p>
          </div>
        </div>
      </div>

      <!-- í™œìš© ë°©ì•ˆ -->
      <div style="margin-top: 2rem; padding: 1.5rem; background: white; border-radius: 12px; border: 2px solid #edeff2;">
        <h3 style="margin: 0 0 1rem 0; color: #2f3542; font-size: 1.15rem; font-weight: 900;">ğŸ’¼ í™œìš© ì‹œë‚˜ë¦¬ì˜¤</h3>
        <div style="display: grid; gap: 0.8rem;">
          <div style="display: flex; align-items: start; gap: 0.8rem;">
            <span style="background: #4834d4; color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.75rem; font-weight: 900; flex-shrink: 0;">ì „ë ¥ ê³µê¸‰</span>
            <p style="margin: 0; color: #57606f; font-size: 0.9rem; line-height: 1.6;">
              ì‹œê°„ëŒ€ë³„ ì „ë ¥ ìˆ˜ìš” ì˜ˆì¸¡ì„ í†µí•œ ë°œì „ëŸ‰ ìµœì í™” ë° ê³µê¸‰ ê³„íš ìˆ˜ë¦½
            </p>
          </div>
          <div style="display: flex; align-items: start; gap: 0.8rem;">
            <span style="background: #20bf6b; color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.75rem; font-weight: 900; flex-shrink: 0;">ë¹„ìš© ì ˆê°</span>
            <p style="margin: 0; color: #57606f; font-size: 0.9rem; line-height: 1.6;">
              í”¼í¬ íƒ€ì„ ì˜ˆì¸¡ì„ í†µí•œ ì „ë ¥ êµ¬ë§¤ ì „ëµ ìˆ˜ë¦½ ë° ìš´ì˜ ë¹„ìš© ì ˆê°
            </p>
          </div>
          <div style="display: flex; align-items: start; gap: 0.8rem;">
            <span style="background: #f7b731; color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.75rem; font-weight: 900; flex-shrink: 0;">ì •ì±… ì§€ì›</span>
            <p style="margin: 0; color: #57606f; font-size: 0.9rem; line-height: 1.6;">
              ì§€ì—­ë³„ ì „ë ¥ ì‚¬ìš© íŒ¨í„´ ë¶„ì„ì„ í†µí•œ ì—ë„ˆì§€ ì •ì±… ìˆ˜ë¦½ ë° ì¸í”„ë¼ íˆ¬ì ê³„íš
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p style="margin:0;">Â© 2025 ì „ë ¥ ë°ì´í„° ë¶„ì„ í”„ë¡œì íŠ¸ | AI í¬íŠ¸í´ë¦¬ì˜¤</p>
    <p style="margin:10px 0 0; font-size:.9rem;">
      <a href="#simulator">ì‹œë®¬ë ˆì´í„°</a> Â· <a href="#models">ëª¨ë¸ ë¹„êµ</a> Â· <a href="#summary">í”„ë¡œì íŠ¸ ìš”ì•½</a>
    </p>
  </footer>

  <script>
    // ì „ì—­ ë³€ìˆ˜
    let currentTab = 'envTab';
    let guDongMapping = null;
    let selectedGu = '';
    let selectedDong = '';

    // êµ¬-ë™ ë§¤í•‘ ë°ì´í„° ë¡œë“œ
    async function loadGuDongMapping() {
      try {
        const response = await fetch('/static/gu_dong_mapping.json');
        const data = await response.json();
        guDongMapping = data;
        initializeSelectors();
      } catch (error) {
        console.error('êµ¬-ë™ ë§¤í•‘ ë¡œë“œ ì‹¤íŒ¨:', error);
        // í´ë°±: ê¸°ë³¸ êµ¬ ë¦¬ìŠ¤íŠ¸ë§Œ ì‚¬ìš©
        const seoulGu = ["ê°•ë‚¨êµ¬","ê°•ë™êµ¬","ê°•ë¶êµ¬","ê°•ì„œêµ¬","ê´€ì•…êµ¬","ê´‘ì§„êµ¬","êµ¬ë¡œêµ¬","ê¸ˆì²œêµ¬","ë…¸ì›êµ¬","ë„ë´‰êµ¬","ë™ëŒ€ë¬¸êµ¬","ë™ì‘êµ¬","ë§ˆí¬êµ¬","ì„œëŒ€ë¬¸êµ¬","ì„œì´ˆêµ¬","ì„±ë™êµ¬","ì„±ë¶êµ¬","ì†¡íŒŒêµ¬","ì–‘ì²œêµ¬","ì˜ë“±í¬êµ¬","ìš©ì‚°êµ¬","ì€í‰êµ¬","ì¢…ë¡œêµ¬","ì¤‘êµ¬","ì¤‘ë‘êµ¬"];
        guDongMapping = {
          gu_dong_list: {},
          code_mapping: {}
        };
        seoulGu.forEach(gu => {
          guDongMapping.gu_dong_list[gu] = [];
        });
        initializeSelectors();
      }
    }

    // ì…€ë ‰í„° ì´ˆê¸°í™”
    function initializeSelectors() {
      const guSelect = document.getElementById('guSelect');
      const dongSelect = document.getElementById('dongSelect');

      // êµ¬ ì„ íƒ ì˜µì…˜ ì¶”ê°€
      const guList = Object.keys(guDongMapping.gu_dong_list).sort();
      guList.forEach(gu => {
        const opt = document.createElement('option');
        opt.value = gu;
        opt.innerText = gu;
        guSelect.appendChild(opt);
      });

      // êµ¬ ì„ íƒ ì´ë²¤íŠ¸
      guSelect.addEventListener('change', function() {
        selectedGu = this.value;
        selectedDong = '';
        
        // ë™ ì„ íƒ ì´ˆê¸°í™”
        dongSelect.innerHTML = '<option value="">-- ë™ì„ ì„ íƒí•˜ì„¸ìš” --</option>';
        
        if (selectedGu) {
          dongSelect.disabled = false;
          const dongs = guDongMapping.gu_dong_list[selectedGu] || [];
          
          dongs.forEach(dong => {
            const opt = document.createElement('option');
            opt.value = dong;
            opt.innerText = dong;
            dongSelect.appendChild(opt);
          });
        } else {
          dongSelect.disabled = true;
        }
      });

      // ë™ ì„ íƒ ì´ë²¤íŠ¸
      dongSelect.addEventListener('change', function() {
        selectedDong = this.value;
      });

      // ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ë³¸ê°’
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const dd = String(d.getDate()).padStart(2,'0');
      document.getElementById('targetDate').value = `${yyyy}-${mm}-${dd}`;
    }

    function init() {
      loadGuDongMapping();
    }

    function openTab(evt, tabName){
      currentTab = tabName;

      const contents = document.getElementsByClassName("tab-content");
      for (let i=0;i<contents.length;i++) contents[i].classList.remove("active");

      const btns = document.getElementsByClassName("tab-btn");
      for (let i=0;i<btns.length;i++){
        btns[i].classList.remove("active");
        btns[i].setAttribute("aria-selected","false");
      }

      document.getElementById(tabName).classList.add("active");
      evt.currentTarget.classList.add("active");
      evt.currentTarget.setAttribute("aria-selected","true");

      // ê²°ê³¼ íŒ¨ë„ ëª¨ë“œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      const mode = document.getElementById('resultMode');
      if(tabName === 'envTab') mode.innerText = "FEATURE SIMULATION";
      else mode.innerText = "DATE-BASED";
    }

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    async function runAI(){
      const placeholder = document.getElementById('result-placeholder');
      const loading = document.getElementById('loading');
      const content = document.getElementById('result-content');
      const status = document.getElementById('resultStatus');

      // ì§€ì—­ ì„ íƒ ê²€ì¦
      if (!selectedGu || !selectedDong) {
        alert('êµ¬ì™€ ë™ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }

      placeholder.style.display = 'none';
      content.style.display = 'none';
      loading.style.display = 'block';

      status.innerText = "ë¶„ì„ì¤‘";

      try {
        // ì§€ì—­ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        const regionKey = `${selectedGu}_${selectedDong}`;
        const regionData = guDongMapping.code_mapping[regionKey];
        
        let requestData = {
          gu: selectedGu,
          dong: selectedDong,
          region_code: regionData ? regionData.full_code : null
        };

        if(currentTab === 'envTab'){
          // í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜
          requestData.mode = 'env';
          requestData.min_temp = parseFloat(document.getElementById('minTemp').value);
          requestData.ground_temp = parseFloat(document.getElementById('groundTemp').value);
          requestData.humidity = parseFloat(document.getElementById('humidity').value);
          requestData.pressure = parseFloat(document.getElementById('pressure').value);
          requestData.sunshine = parseFloat(document.getElementById('sunshine').value);
          requestData.is_holiday = parseInt(document.getElementById('isHoliday').value, 10);
          requestData.lag_1d = parseFloat(document.getElementById('lag_1d').value);
          requestData.lag_7d = parseFloat(document.getElementById('lag_7d').value);
        } else {
          // ë‚ ì§œ ê¸°ë°˜
          requestData.mode = 'date';
          requestData.date = document.getElementById('targetDate').value;
        }

        // Flask API í˜¸ì¶œ
        const response = await fetch('/predict', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(requestData)
        });

        const data = await response.json();

        if(data.success){
          // UI ë°˜ì˜
          document.getElementById('activeTabTag').innerText = data.tag;
          document.getElementById('resultDesc').innerText = data.description;
          document.getElementById('resultVal').innerText = data.prediction.toLocaleString();

          // ìƒíƒœ ì—…ë°ì´íŠ¸
          status.innerText = "ì™„ë£Œ";

          loading.style.display = 'none';
          content.style.display = 'flex';
        } else {
          throw new Error(data.error || 'ì˜ˆì¸¡ ì‹¤íŒ¨');
        }

      } catch(error) {
        console.error('ì˜ˆì¸¡ ì˜¤ë¥˜:', error);
        status.innerText = "ì˜¤ë¥˜ ë°œìƒ";
        loading.style.display = 'none';
        placeholder.style.display = 'flex';
        alert('ì˜ˆì¸¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    window.onload = init;
  </script>
</body>
</html>
